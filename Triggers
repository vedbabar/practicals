DELIMITER $$

-- 1️⃣ BEFORE INSERT Trigger
CREATE TRIGGER trg_before_insert
BEFORE INSERT ON Library
FOR EACH ROW
BEGIN
  INSERT INTO Library_Audit (BookID, Title, Author, Price, Action_Type)
  VALUES (NEW.BookID, NEW.Title, NEW.Author, NEW.Price, 'BEFORE INSERT');
END$$


-- 2️⃣ AFTER INSERT Trigger
CREATE TRIGGER trg_after_insert
AFTER INSERT ON Library
FOR EACH ROW
BEGIN
  INSERT INTO Library_Audit (BookID, Title, Author, Price, Action_Type)
  VALUES (NEW.BookID, NEW.Title, NEW.Author, NEW.Price, 'AFTER INSERT');
END$$


-- 3️⃣ BEFORE UPDATE Trigger
CREATE TRIGGER trg_before_update
BEFORE UPDATE ON Library
FOR EACH ROW
BEGIN
  INSERT INTO Library_Audit (BookID, Title, Author, Price, Action_Type)
  VALUES (OLD.BookID, OLD.Title, OLD.Author, OLD.Price, 'BEFORE UPDATE');
END$$


-- 4️⃣ AFTER UPDATE Trigger
CREATE TRIGGER trg_after_update
AFTER UPDATE ON Library
FOR EACH ROW
BEGIN
  INSERT INTO Library_Audit (BookID, Title, Author, Price, Action_Type)
  VALUES (NEW.BookID, NEW.Title, NEW.Author, NEW.Price, 'AFTER UPDATE');
END$$


-- 5️⃣ BEFORE DELETE Trigger
CREATE TRIGGER trg_before_delete
BEFORE DELETE ON Library
FOR EACH ROW
BEGIN
  INSERT INTO Library_Audit (BookID, Title, Author, Price, Action_Type)
  VALUES (OLD.BookID, OLD.Title, OLD.Author, OLD.Price, 'BEFORE DELETE');
END$$


-- 6️⃣ AFTER DELETE Trigger
CREATE TRIGGER trg_after_delete
AFTER DELETE ON Library
FOR EACH ROW
BEGIN
  INSERT INTO Library_Audit (BookID, Title, Author, Price, Action_Type)
  VALUES (OLD.BookID, OLD.Title, OLD.Author, OLD.Price, 'AFTER DELETE');
END$$

DELIMITER ;
